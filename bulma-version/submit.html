<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Submit — Bulma</title>
  <link rel="icon" href="data:,">

  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">

  <style>
    :root {
      --color-bg: #f1f5f9;
      --color-panel: #ffffff;
      --color-text: #0f172a;
      --radius-xl: 16px;
      --shadow-md: 0 10px 28px rgba(2,6,23,.12);
    }
    *, *::before, *::after { box-sizing: border-box; }
    html, body { min-height: 100%; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: var(--color-bg); color: var(--color-text);
      -webkit-font-smoothing: antialiased;
    }
    .brand { position: fixed; top: 14px; left: 20px; font-weight: 700; font-size: .95rem; z-index: 200; }
    .top-right {
      position: fixed; top: 12px; right: 16px; z-index: 200;
      display: flex; align-items: center; gap: .5rem;
    }

    /* ── Page stack ── */
    .page-stack {
      display: flex; flex-direction: column; align-items: center;
      gap: 1.5rem; min-height: 100vh; padding: 80px 16px 56px;
    }

    /* ── Step flow ── */
    .step-flow { display: flex; align-items: flex-start; width: 100%; max-width: 420px; }
    .step { display: flex; flex-direction: column; align-items: center; gap: .4rem; flex-shrink: 0; width: 80px; }
    .step__circle {
      width: 44px; height: 44px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 1rem; border: 2px solid #cbd5e1; background: #fff; color: #94a3b8;
    }
    .step--done   .step__circle { background: #16a34a; border-color: #16a34a; color: #fff; }
    .step--active .step__circle { background: #2563eb; border-color: #2563eb; color: #fff; }
    .step__label { font-size: .7rem; font-weight: 600; color: #94a3b8; text-align: center; line-height: 1.2; }
    .step--done   .step__label { color: #16a34a; }
    .step--active .step__label { color: #2563eb; }
    .step__connector { flex: 1; height: 2px; background: #cbd5e1; margin-top: 21px; }
    .step__connector.done { background: #16a34a; }

    /* ── Panel card ── */
    .panel-card {
      width: min(620px, 100%);
      background: var(--color-panel); border-radius: var(--radius-xl);
      box-shadow: var(--shadow-md); padding: 2rem 2.5rem;
    }
    @media (max-width: 600px) { .panel-card { padding: 1.5rem; } }

    .panel-card__icon {
      width: 52px; height: 52px; border-radius: 14px;
      background: #eff6ff; color: #2563eb;
      display: flex; align-items: center; justify-content: center;
      font-size: 1.4rem; margin-bottom: .85rem;
    }

    /* Field label row */
    .field-label-row {
      display: flex; align-items: center; justify-content: space-between;
      margin-bottom: .45rem;
    }
    .badge-req { font-size: .72rem; background: #f1f5f9; color: #64748b; border: 1px solid #e2e8f0; border-radius: 4px; padding: .15rem .45rem; }
    .badge-opt { font-size: .72rem; background: #f8fafc; color: #94a3b8; border: 1px solid #e2e8f0; border-radius: 4px; padding: .15rem .45rem; }

    /* Drop zone */
    .drop-zone {
      border: 2px dashed #cbd5e1; border-radius: 10px;
      background: #f8fafc; padding: 1.75rem 1rem;
      text-align: center; cursor: pointer; transition: border-color .2s, background .2s;
    }
    .drop-zone:hover, .drop-zone.drag-over { border-color: #2563eb; background: #eff6ff; }
    .drop-zone__icon { font-size: 2rem; color: #94a3b8; margin-bottom: .5rem; }
    .drop-zone__cta { font-size: .9rem; color: #64748b; margin: 0; }
    .drop-zone__cta a { color: #2563eb; font-weight: 600; text-decoration: none; cursor: pointer; }
    .drop-zone__sub { font-size: .78rem; color: #94a3b8; margin: .3rem 0 0; }
    .drop-zone__chosen { font-size: .85rem; color: #16a34a; font-weight: 600; margin-top: .5rem; display: none; }
    .drop-zone__chosen.visible { display: block; }

    /* Notice box */
    .notice-box {
      display: flex; align-items: flex-start; gap: .75rem;
      background: #eff6ff; border: 1px solid #bfdbfe;
      border-radius: 10px; padding: .85rem 1rem; margin-bottom: 1.25rem;
      font-size: .86rem; color: #1e40af; line-height: 1.5;
    }
    .notice-box i { margin-top: .1rem; flex-shrink: 0; }
  </style>

  <!-- Font Awesome 6 -->
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css"></noscript>

  <link rel="preload" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css" rel="stylesheet"></noscript>

  <link href="../shared/css/tokens.css" rel="stylesheet" media="print" onload="this.media='all';this.onload=null">
  <link href="../shared/css/bridge-bulma.css" rel="stylesheet" media="print" onload="this.media='all';this.onload=null">
  <link href="../shared/css/app.css" rel="stylesheet" media="print" onload="this.media='all';this.onload=null">

  <link rel="modulepreload" href="../shared/js/app.js">
</head>

<body data-framework="bulma">
  <a class="skip-link" href="#main">Skip to main content</a>
  <div id="statusLive" class="is-sr-only" aria-live="polite"></div>

  <div class="brand">Bulma + Tokens</div>

  <div class="top-right">
    <span id="pidBadge" style="font-size:.85rem;font-weight:600;">ID: …</span>
    <button id="logoutBtn" type="button" class="button is-small is-light" title="Reset Study ID">
      <span class="icon"><i class="fa-solid fa-rotate-left"></i></span>
    </button>
    <button id="copyIdBtn" class="button is-small is-light" type="button" title="Copy Study ID">
      <span class="icon"><i class="fa-regular fa-copy"></i></span>
    </button>
  </div>

  <main id="main" class="page-stack" tabindex="-1">

    <!-- Step flow -->
    <nav class="step-flow" aria-label="Progress steps">
      <div class="step step--done">
        <div class="step__circle"><i class="fa-solid fa-check"></i></div>
        <span class="step__label">Sign In</span>
      </div>
      <div class="step__connector done"></div>
      <div class="step step--active">
        <div class="step__circle"><i class="fa-solid fa-file-arrow-up"></i></div>
        <span class="step__label">Submit</span>
      </div>
      <div class="step__connector"></div>
      <div class="step">
        <div class="step__circle"><i class="fa-solid fa-chart-bar"></i></div>
        <span class="step__label">Feedback</span>
      </div>
    </nav>

    <!-- Panel card -->
    <div class="panel-card">
      <div class="panel-card__icon">
        <i class="fa-solid fa-file-arrow-up"></i>
      </div>
      <h1 class="title is-4 mb-1">Submit Your Assignment</h1>
      <p class="has-text-grey mb-3" style="font-size:.9rem;">Select an assignment from the list, attach a file if required, then click <strong>Submit Assignment</strong> to record your submission.</p>

      <!-- Simulated notice -->
      <div class="notice-box">
        <i class="fa-solid fa-circle-info"></i>
        <span>This is a <strong>simulated submission</strong> for study purposes only. No files are uploaded or stored on a server. Your data remains local to this browser.</span>
      </div>

      <form id="submitForm" novalidate>
        <!-- Assignment -->
        <div class="field">
          <div class="field-label-row">
            <label class="label" for="assignment">
              <span class="icon-text">
                <span class="icon" style="color:#64748b;"><i class="fa-solid fa-list-check"></i></span>
                <span>Assignment</span>
              </span>
            </label>
            <span class="badge-req">Required</span>
          </div>
          <div class="control">
            <div class="select is-fullwidth">
              <select id="assignment" name="assignment" required>
                <option value="">— Select an assignment —</option>
                <option value="Web Dev Lab">Web Dev Lab</option>
                <option value="HCI Coursework 1">HCI Coursework 1</option>
                <option value="Programming Lab">Programming Lab</option>
              </select>
            </div>
          </div>
          <p class="help"><i class="fa-regular fa-circle-question me-1"></i>Choose the assignment you are submitting for.</p>
        </div>

        <!-- File attachment -->
        <div class="field">
          <div class="field-label-row">
            <label class="label" for="fileInput">
              <span class="icon-text">
                <span class="icon" style="color:#64748b;"><i class="fa-solid fa-paperclip"></i></span>
                <span>Attachment</span>
              </span>
            </label>
            <span class="badge-opt">Optional</span>
          </div>
          <div class="drop-zone" id="dropZone" role="button" tabindex="0"
               aria-label="Click to choose a file or drag and drop here">
            <div class="drop-zone__icon">
              <i class="fa-solid fa-cloud-arrow-up"></i>
            </div>
            <p class="drop-zone__cta">
              <a id="browseLink">Click to browse</a> or drag a file here
            </p>
            <p class="drop-zone__sub">PDF, ZIP, DOC, DOCX accepted</p>
            <p class="drop-zone__chosen" id="chosenFileName"></p>
          </div>
          <input type="file" style="display:none;" id="fileInput" accept=".pdf,.zip,.doc,.docx"
                 aria-label="Choose a file to attach">
        </div>

        <!-- Comments -->
        <div class="field">
          <div class="field-label-row">
            <label class="label" for="commentsInput">
              <span class="icon-text">
                <span class="icon" style="color:#64748b;"><i class="fa-regular fa-comment-dots"></i></span>
                <span>Submission Notes</span>
              </span>
            </label>
            <span class="badge-opt">Optional</span>
          </div>
          <div class="control">
            <textarea class="textarea" id="commentsInput" rows="3"
                      placeholder="Add any notes or comments about your submission..."></textarea>
          </div>
          <p class="help">These notes will appear in your feedback record.</p>
        </div>

        <div class="field is-grouped is-grouped-multiline" style="margin-top:1.5rem;">
          <div class="control">
            <button type="submit" class="button is-primary" aria-describedby="submit-hint">
              <span class="icon"><i class="fa-solid fa-circle-check"></i></span>
              <span>Submit Assignment</span>
            </button>
          </div>
          <div class="control">
            <a class="button is-light" href="./feedback.html" aria-describedby="view-fb-hint">
              <span class="icon"><i class="fa-solid fa-chart-bar"></i></span>
              <span>View Feedback</span>
            </a>
          </div>
        </div>
        <p class="help mt-1" id="submit-hint">Records a submission log entry and redirects to the success page.</p>
        <p class="help mt-1" id="view-fb-hint">Opens your latest submission feedback and file (if stored).</p>
      </form>
    </div>

  </main>

  <button id="themeToggle" class="theme-switch" type="button" aria-label="Toggle theme" aria-pressed="false">Toggle theme</button>

  <script type="module" src="../shared/js/app.js"></script>
  <script defer src="../shared/js/metrics.js"></script>
  <script defer src="../shared/js/theme.js"></script>
  <script>
  document.addEventListener('DOMContentLoaded', function () {
    const fileInput  = document.getElementById('fileInput');
    const dropZone   = document.getElementById('dropZone');
    const browseLink = document.getElementById('browseLink');
    const chosenName = document.getElementById('chosenFileName');

    function showFile(name) {
      chosenName.textContent = name ? '\u2713 ' + name : '';
      chosenName.classList.toggle('visible', !!name);
    }

    browseLink.addEventListener('click', () => fileInput.click());
    dropZone.addEventListener('keydown', e => { if (e.key === 'Enter' || e.key === ' ') fileInput.click(); });
    fileInput.addEventListener('change', e => showFile(e.target.files[0]?.name || ''));

    dropZone.addEventListener('dragover',  e => { e.preventDefault(); dropZone.classList.add('drag-over'); });
    dropZone.addEventListener('dragleave', () => dropZone.classList.remove('drag-over'));
    dropZone.addEventListener('drop', e => {
      e.preventDefault();
      dropZone.classList.remove('drag-over');
      const file = e.dataTransfer.files[0];
      if (file) {
        const dt = new DataTransfer();
        dt.items.add(file);
        fileInput.files = dt.files;
        showFile(file.name);
      }
    });
  });
  </script>
</body>
</html>
              </span>
            </label>
          </div>
          <p class="help">You may choose any file. A sample name will be used if left empty.</p>
        </div>

        <div class="field">
          <label class="label" for="commentsInput">Comments (optional)</label>
          <div class="control">
            <textarea class="textarea" id="commentsInput" rows="3" placeholder="Optional comment"></textarea>
          </div>
        </div>

        <div class="buttons">
          <button type="submit" class="button is-primary" aria-describedby="submit-hint">Submit</button>
          <a class="button is-light" href="./feedback.html" aria-describedby="view-fb-hint">View feedback</a>
        </div>
        <p class="help mt-1" id="submit-hint">Submit: records a submission log entry and redirects to the success page.</p>
        <p class="help mt-1" id="view-fb-hint">View feedback: opens your latest submission feedback and file (if stored).</p>
      </form>
    </div>
  </main>

  <button id="themeToggle" class="theme-switch" type="button" aria-label="Toggle theme" aria-pressed="false">
    Toggle theme
  </button>

  <script type="module" src="../shared/js/app.js"></script>
  <script defer src="../shared/js/metrics.js"></script>
  <script defer src="../shared/js/theme.js"></script>
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('fileInput').addEventListener('change', function(e) {
      const fileName = document.getElementById('fileName');
      fileName.textContent = e.target.files[0]?.name || 'No file chosen';
    });
  });
  </script>

</body>
</html>
