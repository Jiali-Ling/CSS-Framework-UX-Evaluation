<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Study Entry</title>
</head>
<body>
<script>
    const BOOTSTRAP_URL = "bootstrap-version/index.html";
    const BULMA_URL = "bulma-version/index.html";

    const KEY = "assigned_version";
    let assigned = null;
    try { 
        assigned = localStorage.getItem(KEY); 
    } catch(e) {
        console.warn("localStorage not available:", e);
    }

    if (!assigned) {
        assigned = (Math.random() < 0.5) ? "A" : "B"; // A=Bootstrap, B=Bulma
        try { 
            localStorage.setItem(KEY, assigned); 
            console.log("New assignment:", assigned === "A" ? "Bootstrap" : "Bulma");
            
            // Log the assignment
            const framework = assigned === "A" ? "bootstrap" : "bulma";
            const logs = JSON.parse(localStorage.getItem("study_logs_v1") || "[]");
            logs.push({
                ts: new Date().toISOString(),
                event: "version_assigned",
                details: framework
            });
            localStorage.setItem("study_logs_v1", JSON.stringify(logs));
        } catch(e) {
            console.warn("Cannot save assignment:", e);
        }
    } else {
        console.log("Existing assignment:", assigned === "A" ? "Bootstrap" : "Bulma");
    }

    const target = (assigned === "A") ? BOOTSTRAP_URL : BULMA_URL;
    window.location.replace(target);
</script>
</body>
</html>
